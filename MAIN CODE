main.py

import discord
from discord.ext import commands
import random
import os
import asyncio
import google.generativeai as genai
# Bot prefix'i (Ã¶rnek: !ping yazarsan Ã§alÄ±ÅŸÄ±r)
bot = commands.Bot(command_prefix="!", intents=discord.Intents.all())
intents = discord.Intents.default()
intents.message_content = True  # bunu aÃ§mazsan komutlarÄ± okumaz
intents.voice_states = True
# Bot hazÄ±r olduÄŸunda Ã§alÄ±ÅŸÄ±r
@bot.event
async def on_ready():
    print(f'âœ… Bot giriÅŸ yaptÄ±: {bot.user}')

# Basit bir komut: !ping
@bot.command()
async def ping(ctx):
    await ctx.send("ğŸ“ Pong!")

# ArgÃ¼man alan komut: !selam ahmet
@bot.command()
async def selam(ctx, isim: str = "kullanÄ±cÄ±"):
    await ctx.send(f"Merhaba {isim}! ğŸ‘‹")

@bot.command()
async def Selam_17_Tane_SÃ¼rdÃ¼rÃ¼lebilir_KalkÄ±nma_Hedef_HakkÄ±nda_Ne_DÃ¼ÅŸÃ¼nÃ¼yorsun(ctx):
    await ctx.send("17 SÃ¼rdÃ¼rÃ¼lebilir KalkÄ±nma Hedefi; yoksulluÄŸu, aÃ§lÄ±ÄŸÄ±, eÅŸitsizliÄŸi bitirmek, eÄŸitimi ve saÄŸlÄ±ÄŸÄ± herkes iÃ§in eriÅŸilebilir kÄ±lmak, iklimi korumak gibi insanlÄ±ÄŸÄ±n en temel sorunlarÄ±na ortak Ã§Ã¶zÃ¼m sunan akÄ±llÄ± ve kapsamlÄ± bir plandÄ±r. 2030 hedefi zor olsa da bugÃ¼ne kadar yaratÄ±ÄŸÄ± kÃ¼resel bilinÃ§ Ã§ok deÄŸerli, vizyonu harika sadece uygulama hÄ±zÄ± eksik.")


# Hata yakalama (isteÄŸe baÄŸlÄ±)
@bot.event
async def on_command_error(ctx, error):
    await ctx.send(f"âŒ Hata oluÅŸtu: {error}")

#robot havalÄ±mÄ±?(githubtan alÄ±nan hoca istediÄŸi iÃ§in Ã¶dev)
@bot.command()
async def HavalÄ±(ctx):
    """Bu Robot HavalÄ±mÄ±"""
    await ctx.send("Evet Bu Robot Ã‡ok HavalÄ± AdmamÄ±m ğŸ˜")#burayÄ± tÃ¼rkÃ§eye Ã§evirdim 

@bot.command()
async def mÃ¼zik(ctx):
    if not ctx.author.voice:
        return await ctx.send("Ã–nce ses kanalÄ±na gir kanka!")

    vc = await ctx.author.voice.channel.connect()

    # yt-dlp ile direkt YouTube'dan Ã§alÄ±yor (ffmpeg bile gerekmiyor)
    vc.play(discord.FFmpegPCMAudio(
        "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
        before_options="-reconnect 1 -reconnect_streamed 1 -reconnect_delay_max 5"
    ))

    await ctx.send("**NEVER GONNA GIVE YOU UP, NEVER GONNA LET YOU DOWN!** ğŸ•º")

    while vc.is_playing():
        await asyncio.sleep(1)
    await vc.disconnect()

# Buraya Gemini API anahtarÄ±nÄ± yaz (Ã¼cretsiz alÄ±nÄ±yor, aÅŸaÄŸÄ±da nasÄ±l alÄ±nÄ±r yazdÄ±m)
genai.configure(api_key="AIzaSyAWy3kv_opcbbJfEnfhcV-UAzY0gJDTb18")

model = genai.GenerativeModel('gemini-2.5-flash') # bu da kesin Ã§alÄ±ÅŸÄ±r  # en hÄ±zlÄ±sÄ±


@bot.command()
async def ai(ctx, *, soru):
    if not soru:
        await ctx.send("Ne sorucan kanka? !ai napÄ±yosun lan gibi")
        return
    
    await ctx.send("ğŸ¤” DÃ¼ÅŸÃ¼nÃ¼yorum kanka, 3 saniye...")
    
    try:
        response = model.generate_content(soru)
        cevap = response.text
        if len(cevap) > 1900:
            cevap = cevap[:1900] + "\n\n(...devamÄ± uzun kanka)"
        await ctx.send(f"{cevap}")
    except Exception as e:
        await ctx.send(f"**HATA DETAYI:** `{str(e)}`\nKeyâ€™in doÄŸru mu, quota dolmuÅŸ mu bakalÄ±m kanka")

#meme atma (hemde iki kere Ã¼st Ã¼ste atmÄ±yor havalÄ± omg)
meme_list = []
current_index = 0

@bot.command()
async def mem(ctx):
    global meme_list, current_index
    
    if not os.path.isdir("images"):
        return await ctx.send("âš ï¸ images klasÃ¶rÃ¼ yok!")

    files = [f for f in os.listdir("images") if f.lower().endswith(('.png', '.jpg', '.jpeg', '.gif', '.webp'))]
    
    if not files:
        return await ctx.send("âš ï¸ KlasÃ¶rde mem yok kanka!")

    # Ä°lk kez Ã§alÄ±ÅŸÄ±yorsa veya liste bittiyse karÄ±ÅŸtÄ±r
    if not meme_list:
        meme_list = files.copy()
        random.shuffle(meme_list)

    # Åimdiki memeyi al
    meme = meme_list.pop(0)  # listeden sil
    await ctx.send(file=discord.File(f"images/{meme}"))

bot.run("YOUR OWN DISCORD TOKEN")
